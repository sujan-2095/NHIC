{% extends "base.html" %}

{% block title %}Register New Patient{% endblock %}

{% block head %}
<script src="{{ url_for('static', filename='script.js') }}"></script>
{% endblock %}

{% block content %}
<div class="card">
    <h1>Register New Patient</h1>
    
    <form method="POST" id="patientForm">
        <div class="form-group">
            <label for="name">Full Name:</label>
            <input type="text" id="name" name="name" required placeholder="Enter patient's full name">
        </div>
        
        <div class="form-group">
            <label for="age">Age:</label>
            <input type="number" id="age" name="age" required placeholder="Enter age">
        </div>
        
        <div class="form-group">
            <label for="stateSelect">State:</label>
            <select id="stateSelect" name="state" required>
                <option value="">Select state</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="districtSelect">District:</label>
            <select id="districtSelect" name="district" required disabled>
                <option value="">Select district</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="user-input">Last 6 digits (for Patient ID):</label>
            <input type="text" id="user-input" name="user-input" required placeholder="Enter 6 digits" 
                   maxlength="6" oninput="generatePatientID()">
        </div>
        
        <div class="form-group">
            <label>Generated Patient ID:</label>
            <p id="patientIdDisplay" class="readonly-field">Will be auto-generated</p>
            <input type="hidden" id="patientId" name="patientId" required>
        </div>
        
        <div class="form-group">
            <p>Consider Using Your Phone Number as Password</p>
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required placeholder="Create a password">
        </div>
        
        <button type="submit" class="btn btn-primary">Register Patient</button>
    </form>
    
    {% if error %}
    <div class="error-message">
        {{ error }}
    </div>
    {% endif %}
    
    <div id="successMessage" class="success-message hidden">
        Patient registered successfully!
    </div>
</div>
{% endblock %}
